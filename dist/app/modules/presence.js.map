{"version":3,"sources":["../../../src/app/modules/presence.js"],"names":["server","config","on","client","stz","is","presence","parse","attrs","to","from","send"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;kBAEe,UAACA,MAAD,EAASC,MAAT,EAAoB;AAC/BD,WAAOE,EAAP,CAAU,SAAV,EAAqB,UAASC,MAAT,EAAiB;AAClCA,eAAOD,EAAP,CAAU,QAAV,EAAoB,UAASE,GAAT,EAAc;AAC9B,gBAAIA,IAAIC,EAAJ,CAAO,UAAP,CAAJ,EAAwB;AACpB,oBAAIC,WAAW,cAAIC,KAAJ,CACX,qBAAmBH,IAAII,KAAJ,CAAUC,EAA7B,GAAgC,QAAhC,GAAyCL,IAAII,KAAJ,CAAUE,IAAnD,GAAwD,oBAD7C,CAAf;AAGAP,uBAAOQ,IAAP,CAAYL,QAAZ;AACH;AACJ,SAPD;AAQH,KATD;AAUH,C","file":"presence.js","sourcesContent":["import Account from './account/model';\nimport xmpp from 'node-xmpp-server';\nimport ltx from 'ltx';\n\nexport default (server, config) => {\n    server.on('connect', function(client) {\n        client.on('stanza', function(stz) {\n            if (stz.is('presence')) {\n                let presence = ltx.parse(\n                    \"<presence from='\"+stz.attrs.to+\"' to='\"+stz.attrs.from+\"' xml:lang='en' />\"\n                )\n                client.send(presence);\n            }\n        });\n    });\n};\n\n"]}