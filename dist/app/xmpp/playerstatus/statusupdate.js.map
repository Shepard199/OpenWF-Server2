{"version":3,"sources":["../../../../src/app/xmpp/playerstatus/statusupdate.js"],"names":["client","stz","query","profile","findOne","username","jid","user","err","statusupdate","parse","attrs","to","from","id","nickname","profileid","status","experience","place_token","place_info_token","mode_info_token","mission_info_token","send"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;kBAEe,UAACA,MAAD,EAASC,GAAT,EAAcC,KAAd,EAAwB;;AAEnC;;;AAGH,oBAAQC,OAAR,CAAgBC,OAAhB,CAAwB,EAACC,UAAUL,OAAOM,GAAP,CAAWC,IAAtB,EAAxB,EAAqD,UAASC,GAAT,EAAcD,IAAd,EAAoB;;AAElE,YAAIE,eAAe,cAAIC,KAAJ,CACf,aAAWT,IAAIU,KAAJ,CAAUC,EAArB,GAAwB,UAAxB,GAAmCX,IAAIU,KAAJ,CAAUE,IAA7C,GAAkD,QAAlD,GAA2DZ,IAAIU,KAAJ,CAAUG,EAArE,GAAwE,kBAAxE,GACI,mCADJ,GAEO,gCAFP,GAEwCP,KAAKQ,QAF7C,GAEsD,gBAFtD,GAEuER,KAAKS,SAF5E,GAEsF,YAFtF,GAEmGd,MAAMe,MAFzG,GAEgH,gBAFhH,GAEiIV,KAAKW,UAFtI,GAEiJ,iBAFjJ,GAEmKhB,MAAMiB,WAFzK,GAEqL,sBAFrL,GAE4MjB,MAAMkB,gBAFlN,GAEmO,qBAFnO,GAEyPlB,MAAMmB,eAF/P,GAE+Q,wBAF/Q,GAEwSnB,MAAMoB,kBAF9S,GAEiU,KAFjU,GAGI,UAHJ,GAIA,OALe,CAAnB;AAOAtB,eAAOuB,IAAP,CAAYd,YAAZ;AAEN,KAXD;AAYA,C","file":"statusupdate.js","sourcesContent":["import Account from '../../modules/account/model';\nimport xmpp from 'node-xmpp-server';\nimport ltx from 'ltx';\n\nexport default (client, stz, query) => {\n\n    //.replace('data-','');\n\n    \n\tAccount.profile.findOne({username: client.jid.user}, function(err, user) {\n        \n        let statusupdate = ltx.parse(\n            \"<iq to='\"+stz.attrs.to+\"' from='\"+stz.attrs.from+\"' id='\"+stz.attrs.id+\"' type='result'>\"+\n                \"<query xmlns='urn:cryonline:k01'>\"+\n                   \"<peer_status_update nickname='\"+user.nickname+\"' profile_id='\"+user.profileid+\"' status='\"+query.status+\"' experience='\"+user.experience+\"' place_token='\"+query.place_token+\"' place_info_token='\"+query.place_info_token+\"' mode_info_token='\"+query.mode_info_token+\"' mission_info_token='\"+query.mission_info_token+\"'/>\"+\n                \"</query>\"+\n            \"</iq>\"\n        )\n        client.send(statusupdate); \n\n\t});\n};"]}