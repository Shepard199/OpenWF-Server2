{"version":3,"sources":["../../../../src/app/xmpp/peerstatusupdate/peerstatusupdate.js"],"names":["client","stz","query","peer_status","parse","attrs","to","from","id","nickname","profile_id","status","experience","place_token","place_info_token","mode_info_token","mission_info_token","send"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;kBAEe,UAACA,MAAD,EAASC,GAAT,EAAcC,KAAd,EAAwB;AACtC;;AAEG,KAAIC,cAAc,cAAIC,KAAJ,CACpB,aAAWH,IAAII,KAAJ,CAAUC,EAArB,GAAwB,UAAxB,GAAmCL,IAAII,KAAJ,CAAUE,IAA7C,GAAkD,QAAlD,GAA2DN,IAAII,KAAJ,CAAUG,EAArE,GAAwE,kBAAxE,GACI,mCADJ,GAEQ,gCAFR,GAEyCN,MAAMO,QAF/C,GAEwD,gBAFxD,GAEyEP,MAAMQ,UAF/E,GAE0F,YAF1F,GAEuGR,MAAMS,MAF7G,GAEoH,gBAFpH,GAEqIT,MAAMU,UAF3I,GAEsJ,iBAFtJ,GAEwKV,MAAMW,WAF9K,GAE0L,sBAF1L,GAEiNX,MAAMY,gBAFvN,GAEwO,qBAFxO,GAE8PZ,MAAMa,eAFpQ,GAEoR,wBAFpR,GAE6Sb,MAAMc,kBAFnT,GAEsU,KAFtU,GAGI,UAHJ,GAIA,OALoB,CAAlB;AAOHhB,QAAOiB,IAAP,CAAYd,WAAZ;;AAEA;AACA,C","file":"peerstatusupdate.js","sourcesContent":["import Account from '../../modules/account/model';\nimport xmpp from 'node-xmpp-server';\nimport ltx from 'ltx';\n\nexport default (client, stz, query) => {\n\t//Account.profile.findOne({username: client.jid.user}, function(err, user) {\n    \n    let peer_status = ltx.parse(\n\t\t\"<iq to='\"+stz.attrs.to+\"' from='\"+stz.attrs.from+\"' id='\"+stz.attrs.id+\"' type='result'>\"+\n\t\t    \"<query xmlns='urn:cryonline:k01'>\"+\n\t\t        \"<peer_status_update nickname='\"+query.nickname+\"' profile_id='\"+query.profile_id+\"' status='\"+query.status+\"' experience='\"+query.experience+\"' place_token='\"+query.place_token+\"' place_info_token='\"+query.place_info_token+\"' mode_info_token='\"+query.mode_info_token+\"' mission_info_token='\"+query.mission_info_token+\"'/>\"+\n\t\t    \"</query>\"+\n\t\t\"</iq>\"\n\t)\n\tclient.send(peer_status); \n\n\t//});\n};"]}