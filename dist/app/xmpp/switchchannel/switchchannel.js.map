{"version":3,"sources":["../../../../src/app/xmpp/switchchannel/switchchannel.js"],"names":["client","stz","query","profile","findOne","username","jid","user","err","switchchannel","parse","attrs","from","to","id","nickname","gender","height","head","current_class","experience","pvp_rating_points","banner_badge","banner_mark","banner_stripe","game_money","cry_money","crown_money","region_id","resource","profileid","send"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;kBAEe,UAACA,MAAD,EAASC,GAAT,EAAcC,KAAd,EAAwB;AACtC,oBAAQC,OAAR,CAAgBC,OAAhB,CAAwB,EAACC,UAAUL,OAAOM,GAAP,CAAWC,IAAtB,EAAxB,EAAqD,UAASC,GAAT,EAAcD,IAAd,EAAoB;AAClE,YAAIE,gBAAgB,cAAIC,KAAJ,CAChB,aAAWT,IAAIU,KAAJ,CAAUC,IAArB,GAA0B,UAA1B,GAAqCX,IAAIU,KAAJ,CAAUE,EAA/C,GAAkD,QAAlD,GAA2DZ,IAAIU,KAAJ,CAAUG,EAArE,GAAwE,kBAAxE,GACI,mCADJ,GAEQ,kBAFR,GAGY,mBAHZ,GAGgCP,KAAKQ,QAHrC,GAG8C,YAH9C,GAG2DR,KAAKS,MAHhE,GAGuE,YAHvE,GAGoFT,KAAKU,MAHzF,GAGgG,sBAHhG,GAGuHV,KAAKW,IAH5H,GAGiI,mBAHjI,GAGqJX,KAAKY,aAH1J,GAGwK,gBAHxK,GAGyLZ,KAAKa,UAH9L,GAGyM,uBAHzM,GAGiOb,KAAKc,iBAHtO,GAGwP,kBAHxP,GAG2Qd,KAAKe,YAHhR,GAG6R,iBAH7R,GAG+Sf,KAAKgB,WAHpT,GAGgU,mBAHhU,GAGoVhB,KAAKiB,aAHzV,GAGuW,gBAHvW,GAGwXjB,KAAKkB,UAH7X,GAGwY,eAHxY,GAGwZlB,KAAKmB,SAH7Z,GAGua,iBAHva,GAGybnB,KAAKoB,WAH9b,GAG0c,IAH1c;;AAKgB;AACA,yBANhB,GAOoB,gCAPpB,GAOqDzB,MAAM0B,SAP3D,GAOqE,GAPrE,GAOyE1B,MAAM2B,QAP/E,GAOwF,qCAPxF,GAQgB,kBARhB,GAUgB,yCAVhB,GAU0DtB,KAAKuB,SAV/D,GAUyE,gHAVzE,GAYY,cAZZ,GAaQ,mBAbR,GAcI,UAdJ,GAeA,OAhBgB,CAApB;AAkBA9B,eAAO+B,IAAP,CAAYtB,aAAZ;AACN,KApBD;AAqBA,C","file":"switchchannel.js","sourcesContent":["import Account from '../../modules/account/model';\nimport xmpp from 'node-xmpp-server';\nimport ltx from 'ltx';\n\nexport default (client, stz, query) => {\n\tAccount.profile.findOne({username: client.jid.user}, function(err, user) {\n        let switchchannel = ltx.parse(\n            \"<iq to='\"+stz.attrs.from+\"' from='\"+stz.attrs.to+\"' id='\"+stz.attrs.id+\"' type='result'>\"+\n                \"<query xmlns='urn:cryonline:k01'>\"+\n                    \"<switch_channel>\"+\n                        \"<character nick='\"+user.nickname+\"' gender='\"+user.gender+\"' height='\"+user.height+\"' fatness='0' head='\"+user.head+\"' current_class='\"+user.current_class+\"' experience='\"+user.experience+\"' pvp_rating_points='\"+user.pvp_rating_points+\"' banner_badge='\"+user.banner_badge+\"' banner_mark='\"+user.banner_mark+\"' banner_stripe='\"+user.banner_stripe+\"' game_money='\"+user.game_money+\"' cry_money='\"+user.cry_money+\"' crown_money='\"+user.crown_money+\"'>\"+\n                            \n                            // Global chat\n                            \"<chat_channels>\"+\n                                \"<chat channel='0' channel_id='\"+query.region_id+\".\"+query.resource+\"' service_id='conference.warface'/>\"+\n                            \"</chat_channels>\"+\n\n                            \"<profile_progression_state profile_id='\"+user.profileid+\"' mission_unlocked='none,trainingmission,all' tutorial_unlocked='7' tutorial_passed='7' class_unlocked='29' />\"+\n\n                        \"</character>\"+\n                    \"</switch_channel>\"+\n                \"</query>\"+\n            \"</iq>\"\n        )\n        client.send(switchchannel); \n\t});\n};"]}