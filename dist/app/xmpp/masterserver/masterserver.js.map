{"version":3,"sources":["../../../../src/app/xmpp/masterserver/masterserver.js"],"names":["client","stz","channel","auth","findOne","username","jid","user","err","pve","parse","attrs","to","from","id","send","pvp_pro","pvp_newbie"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;kBAEe,UAACA,MAAD,EAASC,GAAT,EAAcC,OAAd,EAA0B;AACxC,oBAAQC,IAAR,CAAaC,OAAb,CAAqB,EAACC,UAAUL,OAAOM,GAAP,CAAWC,IAAtB,EAArB,EAAkD,UAASC,GAAT,EAAcD,IAAd,EAAoB;;AAE/D,gBAAOL,OAAP;AACI,iBAAK,KAAL;;AAEQ,oBAAIO,MAAM,cAAIC,KAAJ,CACN,eAAaT,IAAIU,KAAJ,CAAUC,EAAvB,GAA0B,QAA1B,GAAmCX,IAAIU,KAAJ,CAAUE,IAA7C,GAAkD,sBAAlD,GAAyEZ,IAAIU,KAAJ,CAAUG,EAAnF,GAAsF,kBAAtF,GACI,mCADJ,GAEQ,8DAFR,GAGI,UAHJ,GAIA,OALM,CAAV;AAMAd,uBAAOe,IAAP,CAAYN,GAAZ;;AAEJ;AACJ,iBAAK,SAAL;;AAEQ,oBAAIO,UAAU,cAAIN,KAAJ,CACV,eAAaT,IAAIU,KAAJ,CAAUC,EAAvB,GAA0B,QAA1B,GAAmCX,IAAIU,KAAJ,CAAUE,IAA7C,GAAkD,sBAAlD,GAAyEZ,IAAIU,KAAJ,CAAUG,EAAnF,GAAsF,kBAAtF,GACI,mCADJ,GAEQ,kEAFR,GAGI,UAHJ,GAIA,OALU,CAAd;AAMAd,uBAAOe,IAAP,CAAYC,OAAZ;;AAEJ;AACJ,iBAAK,YAAL;;AAEQ,oBAAIC,aAAa,cAAIP,KAAJ,CACb,eAAaT,IAAIU,KAAJ,CAAUC,EAAvB,GAA0B,QAA1B,GAAmCX,IAAIU,KAAJ,CAAUE,IAA7C,GAAkD,sBAAlD,GAAyEZ,IAAIU,KAAJ,CAAUG,EAAnF,GAAsF,kBAAtF,GACI,mCADJ,GAEQ,qEAFR,GAGI,UAHJ,GAIA,OALa,CAAjB;AAMAd,uBAAOe,IAAP,CAAYE,UAAZ;;AAEJ;AAjCR;AAoCN,KAtCD;AAuCA,C","file":"masterserver.js","sourcesContent":["import Account from '../../modules/account/model';\nimport xmpp from 'node-xmpp-server';\nimport ltx from 'ltx';\n\nexport default (client, stz, channel) => {\n\tAccount.auth.findOne({username: client.jid.user}, function(err, user) {\n\t\t\n        switch(channel){\n            case \"pve\":\n                    \n                    let pve = ltx.parse(\n                        \"<iq from='\"+stz.attrs.to+\"' to='\"+stz.attrs.from+\"' xml:lang='en' id='\"+stz.attrs.id+\"' type='result'>\"+\n                            \"<query xmlns='urn:cryonline:k01'>\"+\n                                \"<get_master_server resource='main_pve_6'  load_index='244'/>\"+\n                            \"</query>\"+\n                        \"</iq>\")\n                    client.send(pve);\n\n                break;\n            case \"pvp_pro\":\n\n                    let pvp_pro = ltx.parse(\n                        \"<iq from='\"+stz.attrs.to+\"' to='\"+stz.attrs.from+\"' xml:lang='en' id='\"+stz.attrs.id+\"' type='result'>\"+\n                            \"<query xmlns='urn:cryonline:k01'>\"+\n                                \"<get_master_server resource='main_pvp_pro_2'  load_index='255'/>\"+\n                            \"</query>\"+\n                        \"</iq>\")\n                    client.send(pvp_pro);\n\n                break;\n            case \"pvp_newbie\":\n\n                    let pvp_newbie = ltx.parse(\n                        \"<iq from='\"+stz.attrs.to+\"' to='\"+stz.attrs.from+\"' xml:lang='en' id='\"+stz.attrs.id+\"' type='result'>\"+\n                            \"<query xmlns='urn:cryonline:k01'>\"+\n                                \"<get_master_server resource='main_pvp_newbie_2'  load_index='255'/>\"+\n                            \"</query>\"+\n                        \"</iq>\")\n                    client.send(pvp_newbie);\n\n                break;\n        }\n\n\t});\n};"]}