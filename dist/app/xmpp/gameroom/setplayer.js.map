{"version":3,"sources":["../../../../src/app/xmpp/gameroom/setplayer.js"],"names":["client","stz","query","gameroomopen","findOne","$elemMatch","online_id","attrs","from","err","res","sort","_id"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;kBAEe,UAACA,MAAD,EAASC,GAAT,EAAcC,KAAd,EAAwB;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEG;AACA;AACA;AACA;AACA;AACA;AACA;;;AAIH,kBAAQC,YAAR,CAAqBC,OAArB,CAA6B,EAAC,gBAAgB,EAACC,YAAY,EAACC,WAAWL,IAAIM,KAAJ,CAAUC,IAAtB,EAAb,EAAjB,EAA7B,EAA0F,UAASC,GAAT,EAAcC,GAAd,EAAmB;;AAE5G;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA,GAbD,EAaGC,IAbH,CAaQ,EAACC,KAAI,CAAL,EAbR;AAiBA,C","file":"setplayer.js","sourcesContent":["import Account from '../../modules/account/model';\nimport xmpp from 'node-xmpp-server';\nimport ltx from 'ltx';\n\nexport default (client, stz, query) => {\n\n\t// Account.profile.findOne({username: client.jid.user}, function(err, profile_db) {\n\t// \tlet gameroom_sync = ltx.parse(\n //    \t\t\"<iq from='k01.warface' to='rubens@warface/GameClient' type='get' id='3301609612'>\"+\n //                \"<query xmlns='urn:cryonline:k01'>\"+\n //                    \"<gameroom_sync>\"+\n //                        \"<game_room room_id='2' room_type='1'>\"+\n //                            \"<core teams_switched='0' room_name='setTimeout&apos;s GAME ROOM' private='0' players='1' can_start='0' team_balanced='1' min_ready_players='3' revision='16'>\"+\n //                                \"<players>\"+\n //                                    \"<player profile_id='\"+profile_db.profileid+\"' team_id='1' status='1' observer='0' skill='9.000' nickname='\"+profile_db.nickname+\"' clanName='' class_id='0' online_id='\"+profile_db.username+\"@warface/GameClient' group_id='' presence='17' experience='\"+profile_db.experience+\"' rank='55' banner_badge='4294967295' banner_mark='4294967295' banner_stripe='4294967295' region_id='global'/>\"+\n //                                \"</players>\"+\n //                                \"<playersReserved/>\"+\n //                            \"</core>\"+\n //                        \"</game_room>\"+\n //                    \"</gameroom_sync>\"+\n //               \"</query>\"+\n //            \"</iq>\"\n //    \t)\n\n //        client.send(gameroom_sync)\n //    });\n\t\n\n\t// let setplayer = ltx.parse(\n //            \"<iq to='\"+stz.attrs.from+\"' from='\"+stz.attrs.to+\"' id='\"+stz.attrs.id+\"' type='result'>\"+\n //                \"<query xmlns='urn:cryonline:k01'>\"+\n //                \t\"<setserver host='gameamazing' mission_key='24658104-a3c6-4235-a243-3027d828a161' node='http://camaya.net/gloox' ver='0RyJmsC2EQAjYmYlhkMGaVEgE/8=' version='1.12600.570.21500' session_id='1' cpu_usage='0' mode='pvp_pve' port='64089' status='2' build_type='--release' region_id='global' memory_usage='836' />\"+\n //                \"</query>\"+\n //            \"</iq>\")\n //    client.send(setplayer)\n\n    // let session_join_xml = ltx.parse(\n    //         \"<iq from='\"+stz.attrs.to+\"' type='get'>\"+\n    //             \"<query xmlns='urn:cryonline:k01'>\"+\n    //                 \"<session_join room_id='1' server='gameamazing' hostname='localhost' port='64089' local='0'/>\"+\n    //             \"</query>\"+\n    //         \"</iq>\")\n    // client.send(session_join_xml)\n\n\n\n\tAccount.gameroomopen.findOne({'core.players': {$elemMatch: {online_id: stz.attrs.from}}}, function(err, res) {\n  \t\t\n\t\t//console.log(res);\n\n\t\t// let setprivatestatus = ltx.parse(\n  //           \"<iq to='\"+stz.attrs.from+\"' from='\"+stz.attrs.to+\"' id='\"+stz.attrs.id+\"' type='result'>\"+\n  //               \"<query xmlns='urn:cryonline:k01'>\"+\n  //               \t\"<setserver host='gameamazing' mission_key='\"+res.mission.mission_key+\"' node='http://camaya.net/gloox' ver='0RyJmsC2EQAjYmYlhkMGaVEgE/8=' version='' session_id='1' cpu_usage='0' mode='pvp_pve' port='64203' status='2' build_type='--release' region_id='global' memory_usage='0' />\"+\n  //               \"</query>\"+\n  //           \"</iq>\")\n  //       client.send(setprivatestatus)\n\n\n\t}).sort({_id:1});\n\n\n\n}"]}