{"version":3,"sources":["../../../../src/app/xmpp/message/message.js"],"names":["client","stz","query","profile","findOne","username","jid","user","err","message","parse","attrs","to","id","nickname","nick","send"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;;;kBAEe,UAACA,MAAD,EAASC,GAAT,EAAcC,KAAd,EAAwB;AACtC,oBAAQC,OAAR,CAAgBC,OAAhB,CAAwB,EAACC,UAAUL,OAAOM,GAAP,CAAWC,IAAtB,EAAxB,EAAqD,UAASC,GAAT,EAAcD,IAAd,EAAoB;AAClE,YAAIE,UAAU,cAAIC,KAAJ,CACV,eAAaT,IAAIU,KAAJ,CAAUC,EAAvB,GAA0B,QAA1B,GAAmCX,IAAIU,KAAJ,CAAUE,EAA7C,GAAgD,kBAAhD,GACI,mCADJ,GAEQ,iBAFR,GAE0BN,KAAKO,QAF/B,GAEwC,UAFxC,GAEmDZ,MAAMa,IAFzD,GAE8D,aAF9D,GAE4Eb,MAAMO,OAFlF,GAE0F,KAF1F,GAGI,UAHJ,GAIA,OALU,CAAd;AAOAT,eAAOgB,IAAP,CAAYP,OAAZ;AACN,KATD;AAUA,C","file":"message.js","sourcesContent":["import Account from '../../modules/account/model';\nimport xmpp from 'node-xmpp-server';\nimport ltx from 'ltx';\n\nexport default (client, stz, query) => {\n\tAccount.profile.findOne({username: client.jid.user}, function(err, user) {\n        let message = ltx.parse(\n            \"<iq from='\"+stz.attrs.to+\"' id='\"+stz.attrs.id+\"' type='result'>\"+\n                \"<query xmlns='urn:cryonline:k01'>\"+\n                    \"<message from='\"+user.nickname+\"' nick='\"+query.nick+\"' message='\"+query.message+\"'/>\"+\n                \"</query>\"+\n            \"</iq>\"\n        )\n        client.send(message);\n\t});\n};"]}